{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="{% static 'home/css/change_password.css'%}">
    <script src="{% static 'home/js/login.js' %}"></script>
</head>

<body>
    <div class="container">
        <div class="diagonal-background"></div>
        <div class="content">
            <div id="container_login">
                <form action="" method="POST">
                    <!-- csrf_token là bắt buộc phải có khi gửi form trong django -->
                    {% csrf_token %}
                    <div id="incontainer_login">
                        <div class="chuadangkydem">
                            <div class="chuadangky">
                                <div class="chuatieude">
                                    <div class="logo">
                                        <img onclick="window.location.href='{% url 'home' %}'" src="{% static 'home/images/logo3.png' %}" alt="">
                                    </div>
                                    <div class="tieude">
                                        <div class="chuatieude1">
                                            <h2>Đổi mật khẩu</h2>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="chuadangkyso">
                                <form action="" method="POST"></form>
                                {% csrf_token %}
                                    <div class="chuadangky2">
                                        <label for="">Mật khẩu cũ: </label>
                                        {{ form.old_password }}
                                        <p id="passwordcu_mess">

                                        </p>
                                    </div>
                                    <div class="chuadangky3">
                                        <label for="">Mật khẩu mới: </label>
                                        {{ form.new_password }}
                                        <p id="passwordmoi_mess">
                                            
                                        </p>
                                    </div>
                                    <div class="chuadangky3">
                                        <label for="">Xác nhận mật khẩu mới: </label>
                                        {{ form.confirm_password }}
                                        <p id="passwordr_mess">

                                        </p>
                                    </div>
                                    <button type="submit">Đổi mật khẩu</button>
                                </form>
                                    
                                <script>
                                    function batloipasswordcu() {
                                        password = document.getElementById('passwordcu')
                                        password_mess = document.getElementById('passwordcu_mess')
                                        rs = true
                                        if (password.value === '') {
                                            rs = false
                                            password.style.border = '1px solid red'
                                            password_mess.innerText = 'Password không được bỏ trống'
                                            password_mess.style.color = 'red'
                                            return rs
                                        } else if (password.value.length < 5 || password.value.length > 15) {
                                            rs = false
                                            password.style.border = '1px solid red'
                                            password_mess.innerText = 'Password phải từ 6-15 ký tự'
                                            password_mess.style.color = 'red'
                                        } else {
                                            password.style.border = '1px solid green'
                                            password_mess.innerText = 'Password hợp lệ'
                                            password_mess.style.color = 'green'
                                        }
                                    }
                                    function batloipasswordmoi() {
                                        password = document.getElementById('passwordmoi')
                                        password_mess = document.getElementById('passwordmoi_mess')
                                        rs = true
                                        if (password.value === '') {
                                            rs = false
                                            password.style.border = '1px solid red'
                                            password_mess.innerText = 'Password không được bỏ trống'
                                            password_mess.style.color = 'red'
                                            return rs
                                        } else if (password.value.length < 5 || password.value.length > 15) {
                                            rs = false
                                            password.style.border = '1px solid red'
                                            password_mess.innerText = 'Password phải từ 6-15 ký tự'
                                            password_mess.style.color = 'red'
                                        } else {
                                            password.style.border = '1px solid green'
                                            password_mess.innerText = 'Password hợp lệ'
                                            password_mess.style.color = 'green'
                                        }
                                    }
                                    function batloipasswordr(){
                                        rppassword = document.getElementById('passwordr')
                                        rppassword_mess = document.getElementById('passwordr_mess')
                                        password = document.getElementById('passwordmoi').value
                                        rs = true
                            
                                        if(rppassword.value === ''){
                                            rs = false
                                            rppassword.style.border = '1px solid red'
                                            rppassword_mess.innerText = 'Nhập lại mật khẩu không được bỏ trống'
                                            rppassword_mess.style.color = 'red'
                                        }else if(rppassword.value != password){
                                            rs = false
                                            rppassword.style.border = '1px solid red'
                                            rppassword_mess.innerText = 'Nhập lại mật khẩu không đúng'
                                            rppassword_mess.style.color = 'red'
                                        }else{
                                            rppassword.style.border = '1px solid green'
                                            rppassword_mess.innerText = 'Nhập lại mật khẩu hợp lệ'
                                            rppassword_mess.style.color = 'green'
                                        }
                                          
                                    }
                                </script>
                                    {% if messages %}
                                    <div class="messages">
                                        {% for mesage in messages %}
                                        <div class="{{ message.tag }}">{{ message }}</div>
                                        {% endfor %}
                                    </div>
                                    {% endif %}

                                    <div class="chuadangky5">

                                        

                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="chuahinh">
                            <div class="chuahinh1">
                                <img src="{% static 'home/images/logo1.png' %}" alt="">
                            </div>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    
    <!-- Hiển thị thông báo lỗi hoặc thành công -->
   
      
      <script>
      document.getElementById('google-login-btn').addEventListener('click', function() {
        const clientId = '14310137293-ltolga7peevcmvb8jhq7al070416rrtm.apps.googleusercontent.com';
        const redirectUri = 'http://127.0.0.1:8000/accounts/google/login/callback/';
        const scope = 'email profile';
        
        window.location.href = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=${encodeURIComponent(scope)}&access_type=offline`;
      });
      </script>
</body>


</html>